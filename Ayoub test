

#include <dirent.h> 
#include <stdio.h> 
#include <stdlib.h>
 #include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>



int main(int argc, char  *argv[]) {


    
  
  char *repertoire =argv[1] ;
      
       DIR *d;
  struct dirent *dir;
   char command[100];
       char folder[100];

 //   char movesrc[100];
   // char movedes[100];
    //char pdf[100] ;
    //char txt[100];


  // définir le nouveau sous dossier    
  sprintf(folder, "%s/folder",repertoire);
  
  struct stat st = {0};
//creer le nouveau sous dossier (folder)
/*if (stat(folder, &st) == -1) {
    mkdir(folder, 0777);
}
else { rmdir(folder);
	mkdir(folder, 0777);}*/

//ouvrir répértoire
 
  d = opendir(repertoire);
 if (d) {
  
 //boucler répértoire
     while ((dir = readdir(d)) != NULL) {
		   char movesrc[100]={0} ;
     char	 movedes[100]={0} ;
   char  pdf[100]= {0} ;
    char	 txt[100]={0} ;
    printf("%s\n", dir->d_name);
      // stocker le nom de pdf et fichiers texte dans des variables
      sprintf(pdf, "%s/%s",repertoire,dir->d_name);
       sprintf(txt, "%s/%s.txt",repertoire,dir->d_name);
       
//stocker la  commande dans une variable
       sprintf(command, "pdftotext %s %s",pdf,txt);
       system(command);
           
	// et ca pour le déplacement n'est pas utilisé encore 
    /*    sprintf(movesrc, "%s.txt",pdf);
       sprintf(movedes, "%s/%s.txt",folder,dir->d_name);  
       
           rename(movesrc, movedes);*/
  
 }

    
    closedir(d);
  }
  return 0 ;
   }
   
